{% extends "base.html" %}

{% block title %}Iniciar Sesión | Alerta 24 Vecinos{% endblock %}

{% block extra_head %}
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        .login-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                              url('https://images.pexels.com/photos/380769/pexels-photo-380769.jpeg');
            background-size: cover;
            background-position: center;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="login-bg min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden">
            <!-- Header -->
            <div class="bg-blue-600 p-6 text-center">
                <img src="https://images.pexels.com/photos/3761509/pexels-photo-3761509.jpeg" 
                     alt="Logo Alerta 24 Vecinos" 
                     class="w-20 h-20 mx-auto rounded-full border-4 border-white shadow-md">
                <h1 class="text-2xl font-bold text-white mt-4">Iniciar Sesión</h1>
            </div>

            <!-- Tabs Navigation -->
            <div class="flex border-b">
                <button onclick="openTab(event, 'email-tab')" class="tab-btn flex-1 py-3 font-medium text-gray-600 hover:text-blue-600 focus:outline-none active">
                    <i class="fas fa-envelope mr-2"></i>Email
                </button>
                <button onclick="openTab(event, 'phone-tab')" class="tab-btn flex-1 py-3 font-medium text-gray-600 hover:text-blue-600 focus:outline-none">
                    <i class="fas fa-phone-alt mr-2"></i>Teléfono
                </button>
                <button onclick="openTab(event, 'social-tab')" class="tab-btn flex-1 py-3 font-medium text-gray-600 hover:text-blue-600 focus:outline-none">
                    <i class="fas fa-users mr-2"></i>Social
                </button>
            </div>

            <!-- Tab Contents -->
            <div class="p-6">
                <!-- Email Tab -->
                <div id="email-tab" class="tab-content active">
                    <form id="emailForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Correo Electrónico</label>
                            <input type="email" name="email" required 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
                            <div class="relative">
                                <input type="password" name="password" id="password" required 
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <button type="button" onclick="togglePassword('password')" 
                                        class="absolute right-3 top-2 text-gray-500 hover:text-gray-700">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input id="remember-me" name="remember-me" type="checkbox" 
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="remember-me" class="ml-2 block text-sm text-gray-700">
                                    Recordarme
                                </label>
                            </div>
                            <div class="text-sm">
                                <a href="/forgot-password" class="font-medium text-blue-600 hover:text-blue-500">
                                    ¿Olvidaste tu contraseña?
                                </a>
                            </div>
                        </div>
                        <div class="g-recaptcha" data-sitekey="your-recaptcha-site-key"></div>
                        <button type="submit" 
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                            Iniciar Sesión
                        </button>
                    </form>
                </div>

                <!-- Phone Tab -->
                <div id="phone-tab" class="tab-content">
                    <form id="phoneForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Número de Teléfono</label>
                            <div class="flex">
                                <select class="w-1/4 px-2 py-2 border border-gray-300 rounded-l-lg focus:ring-blue-500 focus:border-blue-500">
                                    <option>+1</option>
                                    <option>+52</option>
                                    <option selected>+57</option>
                                    <option>+58</option>
                                </select>
                                <input type="tel" name="phone" required 
                                       class="w-3/4 px-4 py-2 border-t border-r border-b border-gray-300 rounded-r-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
                            <div class="relative">
                                <input type="password" name="password" id="phone-password" required 
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <button type="button" onclick="togglePassword('phone-password')" 
                                        class="absolute right-3 top-2 text-gray-500 hover:text-gray-700">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="g-recaptcha" data-sitekey="your-recaptcha-site-key"></div>
                        <button type="submit" 
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                            Iniciar Sesión
                        </button>
                    </form>
                </div>

                <!-- Social Tab -->
                <div id="social-tab" class="tab-content">
                    <div class="space-y-4">
                        <button type="button" 
                                class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center justify-center">
                            <i class="fab fa-google mr-2"></i> Continuar con Google
                        </button>
                        <button type="button" 
                                class="w-full bg-blue-800 hover:bg-blue-900 text-white font-bold py-2 px-4 rounded-lg transition duration-300 flex items-center justify-center">
                            <i class="fab fa-facebook-f mr-2"></i> Continuar con Facebook
                        </button>
                        <div class="relative flex items-center">
                            <div class="flex-grow border-t border-gray-300"></div>
                            <span class="flex-shrink mx-4 text-gray-500">o</span>
                            <div class="flex-grow border-t border-gray-300"></div>
                        </div>
                        <div class="text-center mt-6">
                            <h3 class="text-lg font-medium text-gray-800 mb-4">¿Eres nuevo en Alerta Vecinos?</h3>
                            <a href="/register" class="inline-block w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300">
                                <i class="fas fa-user-plus mr-2"></i> Crear cuenta nueva
                            </a>
                            <p class="mt-4 text-sm text-gray-600">
                                Al registrarte aceptas nuestros 
                                <a href="/terms" class="text-blue-600 hover:underline">Términos</a> y 
                                <a href="/privacy" class="text-blue-600 hover:underline">Privacidad</a>
                            </p>
                            <div class="flex items-center justify-center space-x-4">
                                <span class="text-sm text-gray-500">o</span>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <a href="/social-login/google" class="bg-white border text-gray-700 py-2 px-4 rounded flex items-center justify-center">
                                    <i class="fab fa-google mr-2"></i> Google
                                </a>
                                <a href="/social-login/facebook" class="bg-white border text-gray-700 py-2 px-4 rounded flex items-center justify-center">
                                    <i class="fab fa-facebook mr-2"></i> Facebook
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab functionality
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            const tabButtons = document.getElementsByClassName("tab-btn");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Password visibility toggle
        function togglePassword(id) {
            const passwordField = document.getElementById(id);
            const icon = passwordField.nextElementSibling.querySelector('i');
            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                passwordField.type = "password";
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        }

        // Form submission
        document.getElementById('emailForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Add form submission logic here
            console.log("Email form submitted");
        });

        document.getElementById('phoneForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Add form submission logic here
            console.log("Phone form submitted");
        });
    </script>
{% endblock %}

{% block scripts %}
    <!-- JavaScript específico de login -->
    <script>
        // Tab functionality
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            const tabButtons = document.getElementsByClassName("tab-btn");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Resto del código JavaScript...
    </script>
{% endblock %}
